<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>éº¥ç•¶å‹å¥—é¤æ¨è–¦ç³»çµ±</title>
<style>
body {
  font-family: "Microsoft JhengHei", Arial, sans-serif;
  background: #f5f5f5;
  padding: 30px;
}

.container {
  max-width: 700px;
  margin: auto;
  background: white;
  padding: 20px;
  border-radius: 15px;
  box-shadow: 0 0 15px rgba(0,0,0,0.2);
}

h1 {
  color: #db0007;
  text-align: center;
}

.menu-category {
  margin-top: 20px;
}

.menu-category h3 {
  color: #db0007;
  margin-bottom: 10px;
}

.menu-grid {
  display: flex;
  flex-wrap: wrap;
  gap: 10px;
}

.menu-item {
  border: 2px solid #ccc;
  border-radius: 8px;
  padding: 8px 12px;
  cursor: pointer;
  user-select: none;
  transition: all 0.2s;
}

.menu-item.selected {
  border-color: #ffbc0d;
  background: #fff8e1;
}

#result {
  margin-top: 20px;
  font-size: 16px;
}

.cp {
  color:#db0007;
  font-weight:bold;
}
</style>
</head>
<body>

<div class="container">
<h1>ğŸ” éº¥ç•¶å‹å¥—é¤æ¨è–¦ç³»çµ±</h1>

<!-- ä¸»é¤ -->
<div class="menu-category">
  <h3>ä¸»é¤</h3>
  <div class="menu-grid" id="mainGrid"></div>
</div>

<!-- é™„é¤ -->
<div class="menu-category">
  <h3>é™„é¤</h3>
  <div class="menu-grid" id="sideGrid"></div>
</div>

<!-- é£²æ–™ -->
<div class="menu-category">
  <h3>é£²æ–™</h3>
  <div class="menu-grid" id="drinkGrid"></div>
</div>

<div id="result"></div>
</div>

<script>
// èœå–®è³‡æ–™
const mainMenu = [
  {name:"å¤§éº¥å…‹", price:75, fill:8},
  {name:"å‹è¾£é›è…¿å ¡", price:85, fill:7},
  {name:"éº¥å…‹é›å¡Š6å¡Š", price:99, fill:6},
];

const sideMenu = [
  {name:"è–¯æ¢(ä¸­)", price:55, fill:5},
  {name:"æ²™æ‹‰", price:90, fill:4},
];

const drinkMenu = [
  {name:"å¯æ¨‚", price:38, fill:2},
  {name:"æœæ±", price:45, fill:3},
];

let selectedMain = [];
let selectedSide = [];
let selectedDrink = [];

// ç”Ÿæˆèœå–®å‡½æ•¸
function generateMenu(menuArray, containerId, selectedArray) {
  const container = document.getElementById(containerId);
  menuArray.forEach((item,index)=>{
    const div = document.createElement("div");
    div.className = "menu-item";
    div.innerText = `${item.name} NT$${item.price}`;
    
    div.onclick = () => {
      if(selectedArray.includes(index)){
        selectedArray.splice(selectedArray.indexOf(index),1);
        div.classList.remove("selected");
      } else {
        selectedArray.push(index);
        div.classList.add("selected");
      }
      updateResult();
    };
    container.appendChild(div);
  });
}

// ç”Ÿæˆæ‰€æœ‰èœå–®
generateMenu(mainMenu,"mainGrid",selectedMain);
generateMenu(sideMenu,"sideGrid",selectedSide);
generateMenu(drinkMenu,"drinkGrid",selectedDrink);

// è¨ˆç®—çµ„åˆã€ç¸½åƒ¹ã€CPå€¼
function updateResult(){
  let allSelected = [
    ...selectedMain.map(i=>mainMenu[i]),
    ...selectedSide.map(i=>sideMenu[i]),
    ...selectedDrink.map(i=>drinkMenu[i])
  ];

  if(allSelected.length===0){
    document.getElementById("result").innerHTML="";
    return;
  }

  let totalPrice = allSelected.reduce((sum,item)=>sum+item.price,0);
  let totalFill = allSelected.reduce((sum,item)=>sum+item.fill,0);
  let cp = (totalFill/totalPrice).toFixed(3);

  let text = "âœ… ä½ çš„å¥—é¤çµ„åˆï¼š<br>";
  allSelected.forEach(item=>{
    text += `${item.name} NT$${item.price}<br>`;
  });

  text += `<br>ç¸½åƒ¹ï¼š${totalPrice} å…ƒ<br>`;
  text += `<span class="cp">CPå€¼ï¼š${cp}</span>`;

  document.getElementById("result").innerHTML=text;
}
</script>

</body>
</html>
